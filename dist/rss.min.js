!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).RSS=e()}(this,(function(){"use strict";function t(t=""){let e="";for(let s=0;s<t.length;s++){let r=t.charAt(s);r.toLowerCase()!=r&&(e+="-"),e+=r.toLowerCase()}return e}class e{hook=(t,e,s)=>({});constructor(t){this.hook=t}}class s{elements=[];ruleSets=[];query="";constructor(t){this.query=t}ruleset(t){let s=t;"object"==typeof t&&(s=()=>t);let r=new e(s);this.ruleSets.push(r),i.update()}render(e){let s=document.querySelectorAll(this.query);for(let r=0;r<s.length;r++){let l=s[r],o={};for(let s of this.ruleSets){let i=s.hook(l,r,e);for(let e in i)o[t(e)]=i[e]}let n=i._getStyleElement(),d="";d=l.dataset.rssId?l.dataset.rssId:i.getNextId();let a=`[data-rssId="${d}"],[data-rss-id="${d}"]{`;for(let t in o)a+=t+":"+o[t]+";";a+="}",n.innerHTML+=a,l.dataset.rssId=d}}}class r extends s{states=[];constructor(t,e){super(t),this.states="string"==typeof e?[e]:e}render(e){let s=document.querySelectorAll(this.query);for(let r=0;r<s.length;r++){let l=s[r],o={};for(let s of this.ruleSets){let i=s.hook(l,r,e);for(let e in i)o[t(e)]=i[e]}let n=i._getStyleElement(),d="";d=l.dataset.rssId?l.dataset.rssId:i.getNextId();let a="";for(let t of this.states)a+=`[data-rssId="${d}"]:${t},[data-rss-id="${d}"]:${t}`,a+=",";a=a.substring(0,a.lastIndexOf(",")),a+="{";for(let t in o)a+=t+":"+o[t]+";";a+="}",n.innerHTML+=a,l.dataset.rssId=d}}}class i{static selectors=[];static _props={};static _initialized=!1;static _nextId=0;static sayHello(t){console.log("hello",t)}static update(){if(!this._initialized)return;this._getStyleElement().innerHTML="";for(let t of this.selectors)t.render(this._props)}static select(t,e){let i;return i=e?new r(t,e):new s(t),this.selectors.push(i),i}static getProps(){return this._props}static setProps(t){for(let e in t)this._props[e]=t[e];this.update()}static initialize(){if(this._initialized)return;this._initialized=!0,i.update(),new MutationObserver((()=>{i.update()})).observe(document.body,{childList:!0,subtree:!0})}static _getStyleElement(){if(!this._initialized)return!1;let t=document.querySelector("style#rssHead");return t||(t=document.createElement("style"),t.id="rssHead",document.head.appendChild(t)),t}static getNextId(){return this._nextId++,this._nextId-1}}return i}));
